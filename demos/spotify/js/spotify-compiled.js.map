{"version":3,"sources":["spotify.js"],"names":[],"mappings":"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","file":"spotify-compiled.js","sourcesContent":["const DISC = document.getElementById('disc');\nconst PLAYING_CSS_CLASS = 'playing';\n\nlet results = document.getElementById('results');\nlet audioObject;\nlet i;\n\nlet displayAlbumCovers = (obj) => {\n    let div;\n    let albumId;\n    let image;\n    let title;\n    results.innerHTML = '';\n\n    let albums = obj.albums.items;\n\n    for (let i = 0; i < albums.length; i++) {\n        title = document.createElement('label');\n        title.textContent = albums[i].name;\n\n        div = document.createElement('div');\n\n        div.className = 'cover';\n\n        albumId = document.createAttribute('data-album-id');\n        albumId.value = albums[i].id;\n\n        div.setAttributeNode(albumId);\n\n        image = albums[i].images[0] === undefined ? '' : albums[i].images[0].url;\n        div.style.backgroundImage = `url( ${image} )`;\n        div.appendChild(title);\n        results.appendChild(div);\n    }\n};\n\n\nlet searchAlbums = (keyword, callback) => {\n    let response;\n    let parsedResponse;\n    let xhr;\n    let queryUrl;\n\n    if (!keyword.length) {\n        alert('Please enter something in the search box');\n        return;\n    }\n\n    queryUrl = `https://api.spotify.com/v1/search?q= ${ keyword } &type=album`;\n    if (window.XMLHttpRequest) {\n        xhr = new XMLHttpRequest();\n    } else if (window.ActiveXObject) {\n        xhr = new ActiveXObject('Microsoft.XMLHTTP');\n    }\n\n    xhr.onreadystatechange = () => {\n        if (xhr.readyState === 4) {\n            // good!\n            if (xhr.status === 200) {\n                response = xhr.responseText;\n                parsedResponse = JSON.parse(response);\n                callback(parsedResponse);\n            } else {\n                console.log('Not Ready Yet');\n            }\n        }\n    };\n\n    xhr.open('GET', queryUrl, true);\n    xhr.send(null);\n};\n\nlet fetchTracks = (albumId, callback) => {\n    let queryUrl = `https://api.spotify.com/v1/albums/ ${ albumId }`;\n    let response;\n    let xhr;\n\n    if (window.XMLHttpRequest) {\n        xhr = new XMLHttpRequest();\n    } else if (window.ActiveXObject) {\n        xhr = new ActiveXObject('Microsoft.XMLHTTP');\n    }\n\n    xhr.onreadystatechange = () => {\n        if (xhr.readyState === 4) {\n            // good!\n            if (xhr.status === 200) {\n                response = xhr.responseText;\n                callback(response);\n            } else {\n                console.log('Not Ready Yet');\n            }\n        }\n    };\n\n    xhr.open('GET', queryUrl, true);\n    xhr.send(null);\n};\n\ndocument.getElementById('search-form').addEventListener('submit', (e) => {\n    e.preventDefault();\n    searchAlbums(document.getElementById('query').value, displayAlbumCovers);\n}, false);\n\nresults.addEventListener('click', function(e) {\n    let target = e.target;\n\n    if (target !== null && target.classList.contains('cover')) {\n        if (target.classList.contains(PLAYING_CSS_CLASS)) {\n            audioObject.pause();\n        } else {\n            if (audioObject) {\n                audioObject.pause();\n            }\n            fetchTracks(target.getAttribute('data-album-id'), function(data) {\n                data = JSON.parse(data);\n                audioObject = new Audio(data.tracks.items[0].preview_url);\n                audioObject.play();\n                target.classList.add(PLAYING_CSS_CLASS);\n                DISC.classList.add(PLAYING_CSS_CLASS);\n                audioObject.addEventListener('ended', function() {\n                    target.classList.remove(PLAYING_CSS_CLASS);\n                    DISC.classList.remove(PLAYING_CSS_CLASS);\n                });\n                audioObject.addEventListener('pause', function() {\n                    target.classList.remove(PLAYING_CSS_CLASS);\n                    DISC.classList.remove(PLAYING_CSS_CLASS);\n                });\n            });\n        }\n    }\n});"]}